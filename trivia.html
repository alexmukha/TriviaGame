<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Trivia Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" />
</head>

<body>
  <div class="container">
    <h1 id="start" class="btn start">Start the Game</h1>

    <!-- This form will be where users input data about the movies 
    <form id="movie-form">
      <label for="movie-input">Search for a movie</label>
      <input type="text" id="movie-input"><br>

       This button will trigger our AJAX call 
      <input id="find-movie" type="submit" value="Movie Search">
    </form>
-->
    <div id="question"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    ///////////////////////////////////////////////////////////////////////////
    function init(){
        var $start = $('<button>Start</button>');
        $start.on('click', showQuestion);
        $app.empty();
        $app.append($start);
        correct = 0;
        incorrect = 0;
        questionIndex = 0;
        
    
    }
    // This .on("click") function will trigger the AJAX Call
      $("#start").on("click", function(event) {
        $(".start").html("Next").removeClass("start").addClass("next");
        $(".next").on("click", function(event) {
            $("#question").html("");
            return event;
        });

        // Preventing the submit button from trying to submit the form
        // We're optionally using a form so the user may hit Enter to search instead of clicking the button
        event.preventDefault();

        // Here we grab the text from the input box
        // var movie = $("#movie-input").val(); //Might be used to select categories from drop-down.
        var amount = 15;
        var questions = [];
        var answers = [];




        // Here we construct our URL
        var queryURL = "https://opentdb.com/api.php?amount="+amount+"&difficulty=easy&type=multiple";

        // Write code between the dashes below to hit the queryURL with $ajax, then take the response data
        // and display it in the div with an id of movie-view

        // YOUR CODE GOES IN THESE DASHES. DO NOT MANUALLY EDIT THE HTML ABOVE

        // =================================================================
        var $div = $("<div>");




        $.ajax({
      url: queryURL,
      method: "GET"
    }).then(function(response) {
    //   $("#movie-view").html(JSON.stringify(response, null, 10));


    function shuffle(array) {
            var temp;
            var i = array.length
            while (i) {
                var m = Math.floor(Math.random() * i--);
                temp = array[i];
                array[i] = array[m];
                array[m] = temp; };
            return array; };



for (var i = 0; i < response.results.length; i++) {
questions.push(response.results[i]);
// test.push(answers);

// answers.push(questions[i].incorrect_answers[0]);
// answers.push(questions[i].incorrect_answers[1]);
// answers.push(questions[i].incorrect_answers[2]);
answers.push(questions[i].incorrect_answers);
answers[i].push(questions[i].correct_answer);
shuffle(answers[i]);
// answers.push(questions[i].correct_answer);
// console.log(questions);
}



        
// var allAnswers = shuffle(answers);
// shuffle(answers);


    //   console.log(response.results[0].category);
      var category = response.results[0].category;
      var $category = $('<div><b>Category:</b> '+category+ '</div>');
      $div.append($category);

    //   console.log(response.results[0].type);
    //   var type = response.results[0].type;
    //   console.log(response.results[0].difficulty);

    //   console.log(response.results[0].question);
      var question = response.results[0].question;
      var $question = $('<div><b>Question:</b> '+question+ '</div>');
      $div.append($question);

    //   console.log(response.results[0].correct_answer);
      var answer0 = response.results[0].correct_answer;
      var $answer0 = $('<div class="check" value="'+answers[0]+'"><b>Answer0:</b> '+answer0+' === '+answers[0][0]+'</div>');
      $div.append($answer0);


    //   console.log(response.results[0].incorrect_answers[0]);
      var answer1 = response.results[0].incorrect_answers[0];
      var $answer1 = $('<div class="check" value="'+answers[1]+'"><b>Answer1:</b> '+answer1+' === '+answers[0][1]+'</div>');
      $div.append($answer1);

    //   console.log(response.results[0].incorrect_answers[1]);
      var answer2 = response.results[0].incorrect_answers[1];
      var $answer2 = $('<div class="check" value="'+answers[2]+'"><b>Answer2:</b> '+answer2+' === '+answers[0][2]+'</div>');
      $div.append($answer2);

    //   console.log(response.results[0].incorrect_answers[2]);
      var answer3 = response.results[0].incorrect_answers[2];
      var $answer3 = $('<div class="check" value="'+answers[3]+'"><b>Answer3:</b> '+answer3+' === '+answers[0][3]+'</div>');
      $div.append($answer3);

      

      $(".check").on("click", function(event) {
        console.log($(".check").attr("value"));
       return event;
    });

    console.log(questions);
    // console.log(questions[1]);
    // console.log(answers);
    // console.log(answers);
      
    //   console.log(allAnswers);
// console.log(questions[0][0].category);

    })
    $("#question").append($div);

    // =================================================================
      });



    </script>
  </div>
</body>

</html>
